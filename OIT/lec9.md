### **Конспект лекции по Основам информационных технологий**

**Тема урока 9: Северный мост: системная шина, шина памяти, PCI-Express. Пропускная способность.**

**Цель лекции:** Понять роль и принципы работы Северного моста в архитектуре современного компьютера, изучить ключевые шины, которые он объединяет, и освоить расчет их пропускной способности.

---

#### **1. Введение: Архитектура чипсета "Северный мост - Южный мост"**

Исторически основой материнской платы был **чипсет** (chipset — набор микросхем), который делился на два основных компонента:

*   **Северный мост (North Bridge)** или **Контроллер-концентратор памяти (Memory Controller Hub - MCH)**.
*   **Южный мост (South Bridge)** или **Контроллер-концентратор ввода-вывода (I/O Controller Hub - ICH)**.

**Ключевая задача Северного моста** — обеспечить высокоскоростное взаимодействие между самыми производительными компонентами системы:
*   **Центральный процессор (CPU)**
*   **Оперативная память (RAM)**
*   **Видеокарта (GPU)**

Северный мост выступает в роли "диспетчера" или "центрального вокзала" для самых быстрых данных в системе.

**Важное замечание для современных систем:** В современных процессорах AMD и Intel функции **Северного моста интегрированы непосредственно в кристалл CPU**. Теперь контроллер памяти и высокоскоростные шины (PCIe) управляются самим процессором. Это позволило drastically сократить задержки и повысить общую производительность. Однако, логическая модель "процессор — память — видеокарта" остается актуальной, и понимание роли Северного моста критически важно для освоения архитектуры ПК.

---

#### **2. Ключевые шины, управляемые Северным мостом**

##### **2.1. Системная шина (Front-Side Bus - FSB)**

**Что это?** Это высокоскоростной канал связи между **центральным процессором (CPU)** и **Северным мостом**.

**Как работает?**
*   Состоит из нескольких параллельных линий для передачи данных, адресов и управляющих сигналов.
*   Работает на тактовой частоте, задаваемой генератором тактовых импульсов на материнской плате.
*   Частота FSB — ключевой параметр для разгона старых систем.

**Пропускная способность FSB (теоретическая):**
Рассчитывается по формуле:
**Пропускная способность (МБ/с) = (Частота шины (МГц) × Ширина шины (бит)) / 8**

*   **Пример:** Шина FSB с частотой 400 МГц и шириной 64 бита.
    *   Пропускная способность = (400 МГц × 64 бита) / 8 = 3200 МБ/с.

**Современность:** В современных системах FSB заменена на более эффективные точки-точке соединения, такие как **QPI (QuickPath Interconnect) от Intel** и **HyperTransport от AMD**.

##### **2.2. Шина памяти**

**Что это?** Канал связи между **Северным мостом** и **оперативной памятью (RAM)**.

**Типы шин памяти:** Зависят от типа используемой памяти (DDR3, DDR4, DDR5).
*   **DDR** (Double Data Rate) — передает данные два раза за такт (по фронту и срезу тактового импульса).

**Пропускная способность шины памяти (ПСП):**
Это самый важный параметр для шины памяти. Рассчитывается по формуле:
**ПСП (МБ/с) = Эффективная частота (МТ/с) × Ширина шины (бит) / 8**

*   **Эффективная частота (МТ/с - Мегатрансферов в секунду):** Для DDR это в 2 раза выше реальной частоты (DRAM Frequency). Например, DDR4-3200 имеет реальную частоту 1600 МГц, но эффективную — 3200 МТ/с.
*   **Ширина шины:** Для одноканального режима равна 64 бита. В двухканальном режиме ширина удваивается (128 бит), что приводит к удвоению пропускной способности.

**Примеры расчета:**
1.  **Одноканальная DDR4-3200:**
    *   ПСП = 3200 МТ/с × 64 бита / 8 = **25600 МБ/с = 25.6 ГБ/с**.
2.  **Двухканальная DDR4-3200:**
    *   ПСП = 3200 МТ/с × 128 бита / 8 = **51200 МБ/с = 51.2 ГБ/с**.

**Вывод:** Использование многоканального режима — эффективный способ значительно повысить производительность системы, особенно в задачах, чувствительных к скорости памяти (игры, монтаж видео).

##### **2.3. Шина PCI Express (PCIe)**

**Что это?** Высокоскоростная последовательная шина для подключения периферийных устройств. Основной "клиент" — **видеокарта**.

**Особенности:**
*   **Последовательная:** В отличие от параллельных шин (PCI), данные передаются по линиям (lane) последовательно, что позволяет достигать высоких частот.
*   **Топология "точка-точка":** Каждое устройство имеет выделенное соединение с контроллером (Северным мостом/процессором).
*   **Масштабируемость:** Шина состоит из линий (lanes): x1, x4, x8, x16. Чем больше линий, тем выше пропускная способность. Видеокарты обычно используют слот PCIe x16.

**Пропускная способность PCIe:**
Зависит от **версии стандарта** и **количества линий (lanes)**.

**Формула для одной линии (x1) в одном направлении:**
**ПСП (ГБ/с) = (Скорость кодирования (ГТ/с) × Бит на такт) / 8**

*   **Скорость кодирования (Гигатрансферов в секунду, ГТ/с):** Скорость передачи данных.
*   **Бит на такт:** Для PCIe 1.x и 2.x используется кодирование 8b/10b (10 бит для передачи 8 бит данных, эффективность 80%). Для PCIe 3.0 и новее — 128b/130b (эффективность ~98.5%).

**Сводная таблица пропускной способности PCIe (на одну линию, x1):**

| Версия PCIe | Скорость кодирования | Эффективность кодирования | Пропускная способность (x1) |
| :---------- | :-------------------- | :------------------------- | :--------------------------- |
| PCIe 1.0    | 2.5 ГТ/с              | 8b/10b (80%)               | ~250 МБ/с                   |
| PCIe 2.0    | 5.0 ГТ/с              | 8b/10b (80%)               | ~500 МБ/с                   |
| PCIe 3.0    | 8.0 ГТ/с              | 128b/130b (~98.5%)         | ~985 МБ/с                   |
| PCIe 4.0    | 16.0 ГТ/с             | 128b/130b (~98.5%)         | ~1.97 ГБ/с                  |
| PCIe 5.0    | 32.0 ГТ/с             | 128b/130b (~98.5%)         | ~3.94 ГБ/с                  |

**Пример для видеокарты (слот PCIe x16):**
*   **PCIe 3.0 x16:** ~985 МБ/с × 16 = **~15.75 ГБ/с** в одном направлении.
*   **PCIe 4.0 x16:** ~1.97 ГБ/с × 16 = **~31.51 ГБ/с** в одном направлении.

---

#### **3. Концепция пропускной способности и "узких мест" (Bottleneck)**

**Пропускная способность (Throughput)** — это максимальный объем данных, который может быть передан через канал связи (шину) за единицу времени. Измеряется в ГБ/с (Гигабайт в секунду).

**Северный мост должен обеспечивать такую пропускную способность, чтобы не создавать "узкое место" (Bottleneck).**

**Пример "узкого места":**
Представьте, что мощный процессор (CPU) запрашивает данные из памяти. Если пропускная способность шины памяти мала (например, используется медленная или одноканальная память), процессор будет простаивать в ожидании данных, несмотря на свою высокую производительность. В этой ситуации шина памяти становится "узким местом".

**Идеальный баланс:** Пропускная способность шин FSB (или ее аналогов), памяти и PCI-Express должна быть сбалансирована, чтобы ни один из компонентов не заставлял другие постоянно ждать.

---

#### **4. Итоги и ключевые выводы**

1.  **Северный мост** — это высокоскоростной хаб, связывающий процессор, оперативную память и видеокарту.
2.  **В современных системах** его функции встроены в процессор, что снижает задержки и повышает производительность.
3.  **Три ключевые шины:**
    *   **FSB (устарела):** Связь CPU и Северного моста.
    *   **Шина памяти:** Связь с ОЗУ. Ее пропускная способность критически важна и повышается за счет многоканальности.
    *   **PCIe:** Основная шина для видеокарт и быстрых накопителей. Ее пропускная способность зависит от версии и количества линий.
4.  **Пропускная способность** — главный количественный показатель производительности шины. Умение ее рассчитывать необходимо для понимания производительности системы.
5.  **Баланс компонентов** важен для избежания "узких мест", когда один медленный компонент тормозит работу всей системы.

---
**Рекомендуемая литература для самостоятельного изучения:**
1.  Официальные спецификации от Intel и AMD.
2.  Документация JEDEC по стандартам памяти (DDR4, DDR5).
3.  Спецификации консорциума PCI-SIG для PCI Express.